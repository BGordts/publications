\ProvidesPackage{posters}
\RequirePackage{color,amsfonts,tikz,amssymb,graphicx,enumitem,xparse,ifthen,epstopdf}
\usetikzlibrary{fit,patterns,snakes,calc,decorations,decorations.text,positioning,decorations.pathreplacing,matrix,arrows,automata}

\pgfdeclarelayer{background}
\pgfdeclarelayer{classes}
\pgfsetlayers{background,classes,main}

\newcounter{postersTmpA}
\newcounter{postersTmpB}

\DeclareDocumentCommand{\defgroup}{ O{5mm} O{0mm} O{0mm} m m m m m}{\begin{scope}[xshift=#2,yshift=#3]\filldraw[#7!40!backg,draw=black,very thick,rounded corners] (0.5*#1,0.5*#1) rectangle ++(#4-#1,#5-#1);\draw (0.5*#1,#5-0.5*#1) node[anchor=north west]{\Huge{\bf #6}};\coordinate (#8) at (0.5*#1,#5-0.5*#1);\coordinate (#8-LT) at (0.5*#1,#5-0.5*#1);\coordinate (#8-RT) at (#4-0.5*#1,#5-0.5*#1);\coordinate (#8-LB) at (0.5*#1,0.5*#1);\coordinate (#8-RB) at (#4-0.5*#1,0.5*#1);\coordinate (ROW-#8-B) at (0,0.5*#1);\coordinate (ROW-#8-T) at (0,#5-0.5*#1);\coordinate (COL-#8-L) at (0.5*#1,0);\coordinate (COL-#8-R) at (#4-0.5*#1,0);\end{scope}}
\DeclareDocumentCommand{\grpholow}{ O{0.5} O{2.00} O{1.00} m m m}{\draw [decorate,line width=3pt] ($(COL-#5)+(-0.5*#1,-#1)$) -- ($(COL-#4)+(0.5*#1,-#1)$);\draw ($0.5*(COL-#4)+0.5*(COL-#5)+(0,-#2)$) node[scale=#3] {\Huge{\bf #6}};}
\DeclareDocumentCommand{\grpvelef}{ O{0.5} O{2.00} O{1.00} m m m}{\draw [decorate,line width=3pt] ($(ROW-#5)+(-#1,0.5*#1)$) -- ($(ROW-#4)+(-#1,-0.5*#1)$);\draw ($0.5*(ROW-#4)+0.5*(ROW-#5)+(-#2,0)$) node[scale=#3,rotate=-90] {\Huge{\bf #6}};}

\DeclareDocumentCommand{\computmul}{ O{LABEL} O{1.00} O{2.00} m m }{
\begin{scope}[scale=#3]
  \begin{scope}
    \clip[rounded corners=2 mm] (-0.5,-0.5) rectangle (0.5,0.5);
    \setcounter{postersTmpA}{0}
    \foreach \c in {#5} {
      \addtocounter{postersTmpA}{1}
    }
    \setcounter{postersTmpB}{0}
    \foreach \c in {#5} {
      \fill[\c!60] (0,0) -- (-\arabic{postersTmpB}*360.0/\arabic{postersTmpA}-135:1) arc (-\arabic{postersTmpB}*360.0/\arabic{postersTmpA}-135:-\arabic{postersTmpB}*360.0/\arabic{postersTmpA}-360.0/\arabic{postersTmpA}-135:1) -- cycle;
      \addtocounter{postersTmpB}{1}
      \coordinate (#1-S\arabic{postersTmpB}) at (-\arabic{postersTmpB}*360.0/\arabic{postersTmpA}+180.0/\arabic{postersTmpA}-135:0.25);
    }
    \setcounter{postersTmpB}{0}
    \foreach \c in {#5} {
      \draw[gray,very thick] (-\arabic{postersTmpB}*360.0/\arabic{postersTmpA}-135:1) -- (0,0);
      \addtocounter{postersTmpB}{1}
    }
    \node[scale=#2] (#1-L) at (0,0) {#4};
  \end{scope}
  \draw[rounded corners=2 mm,gray,very thick] (-0.5,-0.5) rectangle (0.5,0.5);
\end{scope}}
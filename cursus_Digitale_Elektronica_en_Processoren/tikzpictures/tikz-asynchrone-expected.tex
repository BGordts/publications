\begin{tikzpicture}[circuit logic US]
\def\dye{0.7};
\def\dy{0.5};
\def\de{0.2};
\def\dxe{0.4};
\coordinate (XE) at (6.5*\dxe,0);
\draw[thick,->] (0,-0.1) -- (0,5*\dye+\de);
\draw[thick,->] (-0.1,0) -- (6.5*\dxe,0);
\foreach \i/\t in {0/$s_1$,1/$s_0$,2/$b$,3/$a$,4/$i$} {
  \draw (0,\dye*\i+0.5*\dy+0.5*\de) node [scale=0.8,anchor=east] {\t};
  \coordinate (I\i-0) at (0,\dye*\i+0.5*\de);
  \coordinate (I\i-1) at (0,\dye*\i+0.5*\de+\dy);
  \draw[dotted] (I\i-0) -- ++(6.5*\dxe,0);
  \draw[dotted] (I\i-1) -- ++(6.5*\dxe,0);
}
\foreach \i/\j/\k/\x in {4/0/1/1,2/1/0/5,1/1/0/4,0/1/0/3} {
  \coordinate (E\i-0) at (\x*\dxe,\dye*\i+0.5*\dy+0.5*\de);
  \draw[thick] (I\i-\j) -- (I\i-\j -| E\i-0) |- (I\i-\k -| XE);
}
\foreach \i/\j/\k/\xa/\xb in {3/1/0/2/6} {
  \coordinate (E\i-0) at (\xa*\dxe,\dye*\i+0.5*\dy+0.5*\de);
  \coordinate (E\i-1) at (\xb*\dxe,\dye*\i+0.5*\dy+0.5*\de);
  \draw[thick] (I\i-\j) -- (I\i-\j -| E\i-0) |- (I\i-\k -| E\i-1) |- (I\i-\j -| XE);
}
\foreach \ia/\xa/\ib/\xb in {4/0/3/0,4/0/2/0,3/0/0/0,0/0/2/0,1/0/3/1} {
  \coordinate (MID) at ($0.5*(E\ia-\xa)+0.5*(E\ib-\xb)$);
  \draw[->,gray] (E\ia-\xa) .. controls (E\ia-\xa -| MID) and (E\ib-\xb -| MID) .. (E\ib-\xb);
}
\begin{scope}[xshift=10*\dxe cm, yshift=2.5*\dye cm]
\def\dyg{1};
\def\dxg{1.25};
\node[and gate,inputs={inverted,normal,inverted}] (A0) at (0,\dyg) {};
\node[nand gate] (A1) at (0,0) {};
\node[nand gate] (A2) at (0,-\dyg) {};
\node[nand gate] (B0) at (\dxg,-0.5*\dyg) {};
\coordinate (B0O) at (B0.output -| 1.65*\dxg,0);
\coordinate (I0) at (-0.75*\dxg,0);
\coordinate (I1) at (-1*\dxg,0);
\coordinate (YI) at (0,1.5*\dyg);
\draw (A0.output) -- (A0.output -| 0.5*\dxg,0) |- (-0.5*\dxg,0.5*\dyg) |- (A1.input 1);
\draw (A1.output) -- (A1.output -| 0.5*\dxg,0) |- (B0.input 1);
\draw (A2.output) -- (A2.output -| 0.5*\dxg,0) |- (B0.input 2);
\draw (B0.output) -- (B0O) |- (-0.5*\dxg,-1.5*\dyg) |- (A2.input 2);
\draw (B0O) |- (-0.5*\dxg,1.5*\dyg) |- (A0.input 1);
\draw (A1.input 2) -| (I0 |- YI) node[anchor=south]{$i$};
\draw (A2.input 1) -| (I1 |- YI) node[anchor=south]{$e$};
\draw (B0O) -- ++(0.25*\dxg,0) node[anchor=south]{$q$};
\draw (B0.output) node[anchor=south]{$s_1$};
\draw (A0.output) node[anchor=south west]{$s_0$};
\draw (A0.input 2) -- (A0.input 2 -| I1); \pdot{A0.input 2 -| I1}
\draw (A0.input 3) -- (A0.input 3 -| I0); \pdot{A0.input 3 -| I0}
\pdot{B0O}
\end{scope}
\end{tikzpicture}